{% assign posts = include.posts %}
{% assign list_classes = 'post-list post-card-grid' %}
{% if include.list_class %}
  {% assign list_classes = list_classes | append: ' ' | append: include.list_class %}
{% endif %}
{% if posts and posts != empty %}
<div class="{{ list_classes }}"{% if include.list_id %} id="{{ include.list_id }}"{% endif %}>
  {% for post in posts %}
    {% assign tag_slugs = '' %}
    {% if post.tags %}
      {% for tag in post.tags %}
        {% assign tag_slug = tag | slugify %}
        {% if tag_slugs != '' %}
          {% assign tag_slugs = tag_slugs | append: ',' %}
        {% endif %}
        {% assign tag_slugs = tag_slugs | append: tag_slug %}
      {% endfor %}
    {% endif %}
<article class="post-item post-card" data-tags="{{ tag_slugs }}">
      {% if post.tags %}
        {% for tag in post.tags %}
          <span class="post-card-tag tag-{{ tag | slugify }}">{{ tag }}</span>
        {% endfor %}
      {% endif %}
      <h3 class="post-card-title">
        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
      </h3>
      <span class="post-card-date">{{ post.date | date: "%B %-d, %Y" }}</span>
      <p class="post-card-excerpt">
        {% if post.description %}
          {{ post.description }}
        {% else %}
          {{ post.excerpt | strip_html | truncatewords: 30 }}
        {% endif %}
      </p>
    </article>
  {% endfor %}
</div>
{% else %}
  <p class="no-posts">{{ include.empty_message | default: 'No posts found.' }}</p>
{% endif %}
